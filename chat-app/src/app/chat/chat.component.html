<div *ngIf="!selectedChatId" class="chat-container">
  <h2>–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —á–∞—Ç</h2>

  <div class="form">
    <label>
      –ù–∞–∑–≤–∞–Ω–∏–µ —á–∞—Ç–∞:
      <input [(ngModel)]="name" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –î–∏–∞–ª–æ–≥ —Å –º–∞–≥–æ–º" />
    </label>

    <label>
      –ù–∞—á–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ:
      <textarea [(ngModel)]="initial" placeholder="–ü—Ä–∏–≤–µ—Ç! –ö—Ç–æ —Ç—ã?.."></textarea>
    </label>

    <button (click)="createChat()">–°–æ–∑–¥–∞—Ç—å —á–∞—Ç</button>
    <div class="error" *ngIf="error">{{ error }}</div>
  </div>

  <h3>–ú–æ–∏ —á–∞—Ç—ã</h3>
  <ul class="chat-list">
    <li *ngFor="let chat of chats"
        [class.selected]="chat.id === selectedChatId">

      <span (click)="selectChat(chat.id)" class="chat-name">
        üó®Ô∏è {{ chat.name }}
      </span>

      <button mat-icon-button color="warn"
              (click)="confirmDelete(chat.id, $event)"
              matTooltip="–£–¥–∞–ª–∏—Ç—å —á–∞—Ç">
        <mat-icon>delete</mat-icon>
      </button>
    </li>
  </ul>
</div>

<div *ngIf="selectedChatId" class="chat-box">
  <h3>–°–æ–æ–±—â–µ–Ω–∏—è</h3>

  <div class="messages" #scrollContainer>
    <div *ngFor="let msg of messages"
         [ngClass]="{'message-user': msg.sender_type === 'user', 'message-assistant': msg.sender_type === 'assistant'}">
      {{ msg.message }}
    </div>
  </div>

  <div class="send-box">
    <input [(ngModel)]="newMessage" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..." (keydown.enter)="sendMessage()" />
    <button (click)="sendMessage()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
  </div>
</div>
